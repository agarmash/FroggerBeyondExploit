#include<stdio.h>
#include<stdlib.h>

void main() {
	FILE *encrypted_file = fopen("xbsavegame.dat","rb");

    fseek(encrypted_file, 0, 2);
    size_t lenght = ftell(encrypted_file);
    fseek(encrypted_file, 0, 0);

	void *buffer = malloc(lenght);
    fread(buffer, 1, lenght, encrypted_file);

    uint i = 0x10cf;

    for (uint ecx = 0x1AA; ecx; ecx--, i++) {
        *(unsigned char *)(buffer + i) = (unsigned char) ((((*(unsigned char *)(buffer + i) ^ ecx) + ecx) ^ ecx) ^ 0xEA);
    }

    FILE *output = fopen("xbsavegame_decrypted.dat","wb");
    fwrite(buffer, 1, lenght, output);
}